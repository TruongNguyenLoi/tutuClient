{"ast":null,"code":"import _slicedToArray from\"D:/TutuFinal/tutuClient/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useEffect}from'react';import{useState}from'react';import Filter from'components/Filter/Filter';import Title from'components/Filter/Title';import Product from'components/Item/Product';import Pagination from'components/Pagination/Pagination';import{getProductListByCategoryAndSubcategory,getProductList}from'actions/services/ProductServices';import useTimeout from'hooks/useTimeout';import ProductSkeleton from'components/Item/ProductSkeleton';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ListProductPage(props){var match=props.match;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),totalElements=_useState4[0],setTotalElements=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var params=new URLSearchParams(window.location.search);var page=params.get('page');var sortBy=params.get('sort_by')?params.get('sort_by'):'';var sortValue=params.get('sort_value')?params.get('sort_value'):'';var keyword=params.get('keyword')?params.get('keyword'):'';var price=params.get('price')?params.get('price'):'';var brand=params.get('brand')?params.get('brand'):'';useEffect(function(){document.title=\"Danh sách sản phẩm giá cực tốt\";var searchObject={};searchObject.keyword=keyword?keyword:'';searchObject.page=page?parseInt(page):1;var category=match.params.category?match.params.category:'';var subcategory=match.params.subcategory?match.params.subcategory:'';searchObject.category=category;searchObject.subcategory=subcategory;searchObject.sortBy=sortBy?sortBy:'';searchObject.sortValue=sortValue?sortValue:'';searchObject.brand=brand?brand:'';searchObject.price=price?price:'';if(category!==''&&category){getProductListByCategoryAndSubcategory(searchObject).then(function(res){setProducts(res.data.content);setTotalElements(res.data.totalElements);}).catch(function(err){return console.log(err);});}else{getProductList(searchObject).then(function(res){setProducts(res.data.content);setTotalElements(res.data.totalElements);}).catch(function(err){return console.log(err);});}},[page,match,brand,keyword,sortBy,sortValue,price]);useTimeout(function(){return setLoading(false);},loading?1000:null);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row sm-gutter section__content\",children:[/*#__PURE__*/_jsx(Filter,{category:match.params.category,history:props.history}),/*#__PURE__*/_jsxs(\"div\",{className:\"col l-9-4 m-12 c-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"home-product\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row sm-gutter section__item\",children:/*#__PURE__*/ // products?.length > 0 ? (\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Title,{type:match.params.category,totalProducts:totalElements}),loading?/*#__PURE__*/_jsx(ProductSkeleton,{total:totalElements}):/*#__PURE__*/_jsx(Product,{products:products})]})// ) : <p>Không tìm thấy sản phẩm cần  tìm</p>\n})}),/*#__PURE__*/_jsx(Pagination,{totalRows:totalElements,page:page?page:1,limit:20})]})]})});}export default ListProductPage;","map":{"version":3,"names":["React","useEffect","useState","Filter","Title","Product","Pagination","getProductListByCategoryAndSubcategory","getProductList","useTimeout","ProductSkeleton","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ListProductPage","props","match","_useState","_useState2","_slicedToArray","products","setProducts","_useState3","_useState4","totalElements","setTotalElements","_useState5","_useState6","loading","setLoading","params","URLSearchParams","window","location","search","page","get","sortBy","sortValue","keyword","price","brand","document","title","searchObject","parseInt","category","subcategory","then","res","data","content","catch","err","console","log","children","className","history","type","totalProducts","total","totalRows","limit"],"sources":["D:/TutuFinal/tutuClient/src/pages/ListProductPage.js"],"sourcesContent":["import React from 'react'\r\nimport { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport Filter from 'components/Filter/Filter';\r\nimport Title from 'components/Filter/Title';\r\nimport Product from 'components/Item/Product';\r\nimport Pagination from 'components/Pagination/Pagination';\r\nimport { getProductListByCategoryAndSubcategory, getProductList } from 'actions/services/ProductServices'\r\nimport useTimeout from 'hooks/useTimeout';\r\nimport ProductSkeleton from 'components/Item/ProductSkeleton';\r\n\r\nfunction ListProductPage(props) {\r\n    const { match } = props;\r\n    const [products, setProducts] = useState([]);\r\n    const [totalElements, setTotalElements] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const params = new URLSearchParams(window.location.search)\r\n    const page = params.get('page');\r\n    const sortBy = params.get('sort_by') ? params.get('sort_by') : '';\r\n    const sortValue = params.get('sort_value') ? params.get('sort_value') : '';\r\n    const keyword = params.get('keyword') ? params.get('keyword') : '';\r\n    const price = params.get('price') ? params.get('price') : '';\r\n    const brand = params.get('brand') ? params.get('brand') : '';\r\n    useEffect(() => {\r\n        document.title = \"Danh sách sản phẩm giá cực tốt\"\r\n        let searchObject = {};\r\n        searchObject.keyword = keyword ? keyword : '';\r\n        searchObject.page = page ? parseInt(page) : 1;\r\n        const category = match.params.category ? match.params.category : '';\r\n        const subcategory = match.params.subcategory ? match.params.subcategory : '';\r\n        searchObject.category = category;\r\n        searchObject.subcategory = subcategory;\r\n        searchObject.sortBy = sortBy ? sortBy : '';\r\n        searchObject.sortValue = sortValue ? sortValue : '';\r\n        searchObject.brand = brand ? brand : '';\r\n        searchObject.price = price ? price : '';\r\n        if (category !== '' && category) {\r\n            getProductListByCategoryAndSubcategory(searchObject)\r\n                .then((res) => {\r\n                    setProducts(res.data.content);\r\n                    setTotalElements(res.data.totalElements)\r\n                })\r\n                .catch(err => console.log(err))\r\n        } else {\r\n            getProductList(searchObject)\r\n                .then((res) => {\r\n                    setProducts(res.data.content);\r\n                    setTotalElements(res.data.totalElements)\r\n                })\r\n                .catch(err => console.log(err))\r\n        }\r\n    }, [page, match, brand, keyword, sortBy, sortValue, price])\r\n\r\n\r\n    useTimeout(() => setLoading(false), loading ? 1000 : null);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"row sm-gutter section__content\">\r\n                <Filter category={match.params.category} history={props.history} />\r\n                <div className=\"col l-9-4 m-12 c-12\">\r\n                    <div className=\"home-product\">\r\n                        <div className=\"row sm-gutter section__item\">\r\n                            {\r\n                                // products?.length > 0 ? (\r\n                                    <>\r\n                                        <Title type={match.params.category} totalProducts={totalElements} />\r\n                                        {\r\n                                            loading ? <ProductSkeleton total={totalElements} /> : <Product products={products} />\r\n                                        }\r\n                                    </>\r\n                                // ) : <p>Không tìm thấy sản phẩm cần  tìm</p>\r\n                            }\r\n                        </div>\r\n\r\n                    </div>\r\n                    <Pagination totalRows={totalElements} page={page ? page : 1} limit={20} />\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ListProductPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}