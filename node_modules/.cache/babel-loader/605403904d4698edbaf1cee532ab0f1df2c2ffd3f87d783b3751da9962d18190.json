{"ast":null,"code":"import _slicedToArray from\"D:/TutuFinal/tutuClient/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useEffect,useState}from'react';import AccountNavbar from'components/AccountNavbar/AccountNavbar.';import Loading from'components/Loading/Loading';import useTimeout from'hooks/useTimeout';import{deleteProductLiked,getListProductLiked}from'actions/services/ProductServices';import{Link}from'react-router-dom';import{currency}from'utils/FormatCurrency';import{getUserLogin}from'actions/services/UserActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function CustomerWishlist(props){var token=localStorage.getItem(\"token\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listProductLiked=_useState2[0],setListProductLiked=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState({id:'',fullName:'',username:''}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var getData=useCallback(function(){getListProductLiked().then(function(res){return setListProductLiked(res);}).catch(function(){return alert('ERROR');});},[]);var getUser=function getUser(){getUserLogin().then(function(res){setUser(res.data);}).catch(function(err){return console.log(err);});};useEffect(function(){document.title=\"Sản phẩm yêu thích | Tiki\";getUser();getData();},[getData]);var dislikeProduct=function dislikeProduct(productId){if(token){deleteProductLiked(productId).then(function(){return getData();}).catch(function(){return alert(\"ERR\");});}else{props.history.push('/login');}};useTimeout(function(){return setLoading(false);},loading?1000:null);return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(\"div\",{className:\"row sm-gutter section__content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"customer-wishlist\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row sm-gutter section__item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col l-2-4 m-3 c-3\",children:/*#__PURE__*/_jsx(AccountNavbar,{name:user===null||user===void 0?void 0:user.fullName})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col l-9-4 m-9 c-9\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"heading\",children:[\"Danh s\\xE1ch y\\xEAu th\\xEDch (\",listProductLiked.length,\") \"]}),/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:listProductLiked.map(function(item){var _item$category,_item$category2,_item$category3,_item$subcategory,_item$subcategory2;return/*#__PURE__*/_jsxs(\"li\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-delete\",onClick:function onClick(){return dislikeProduct(item.productId);},children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"thumbnail\",children:/*#__PURE__*/_jsx(Link,{to:\"/san-pham/\".concat(item.productId,\"/\").concat(item.slug),children:/*#__PURE__*/_jsx(\"div\",{className:\"thumbnail-img\",children:/*#__PURE__*/_jsx(\"img\",{className:\"image\",alt:\"\",src:item.mainImage})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"body\",children:[/*#__PURE__*/_jsx(Link,{className:\"name\",to:\"/san-pham/\".concat(item.productId,\"/\").concat(item.slug),children:item.name}),/*#__PURE__*/_jsx(Link,{className:\"name\",to:\"/\".concat((_item$category=item.category)===null||_item$category===void 0?void 0:_item$category.code),children:(_item$category2=item.category)===null||_item$category2===void 0?void 0:_item$category2.name}),/*#__PURE__*/_jsx(Link,{className:\"name\",to:\"/\".concat((_item$category3=item.category)===null||_item$category3===void 0?void 0:_item$category3.code,\"/\").concat((_item$subcategory=item.subcategory)===null||_item$subcategory===void 0?void 0:_item$subcategory.code),children:(_item$subcategory2=item.subcategory)===null||_item$subcategory2===void 0?void 0:_item$subcategory2.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-footer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"price\",children:currency(item.price)}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"list-price\",children:currency(item.list_price)}),/*#__PURE__*/_jsxs(\"div\",{className:\"discount\",children:[item.percent_discount,\"%\"]})]})]})]},item.id);})})]})]})})})});}","map":{"version":3,"names":["React","useCallback","useEffect","useState","AccountNavbar","Loading","useTimeout","deleteProductLiked","getListProductLiked","Link","currency","getUserLogin","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CustomerWishlist","props","token","localStorage","getItem","_useState","_useState2","_slicedToArray","listProductLiked","setListProductLiked","_useState3","_useState4","loading","setLoading","_useState5","id","fullName","username","_useState6","user","setUser","getData","then","res","catch","alert","getUser","data","err","console","log","document","title","dislikeProduct","productId","history","push","children","className","name","length","map","item","_item$category","_item$category2","_item$category3","_item$subcategory","_item$subcategory2","onClick","to","concat","slug","alt","src","mainImage","category","code","subcategory","price","list_price","percent_discount"],"sources":["D:/TutuFinal/tutuClient/src/pages/CustomerWishlist.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\r\nimport AccountNavbar from 'components/AccountNavbar/AccountNavbar.';\r\nimport Loading from 'components/Loading/Loading'\r\nimport useTimeout from 'hooks/useTimeout';\r\nimport { deleteProductLiked, getListProductLiked } from 'actions/services/ProductServices'\r\nimport { Link } from 'react-router-dom';\r\nimport { currency } from 'utils/FormatCurrency';\r\nimport { getUserLogin } from 'actions/services/UserActions';\r\nexport default function CustomerWishlist(props) {\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n    const [listProductLiked, setListProductLiked] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [user, setUser] = useState({\r\n        id: '',\r\n        fullName: '',\r\n        username: '',\r\n    })\r\n\r\n    const getData = useCallback(() => {\r\n        getListProductLiked()\r\n            .then((res) => setListProductLiked(res))\r\n            .catch(() => alert('ERROR'))\r\n    }, [])\r\n    const getUser = () => {\r\n        getUserLogin()\r\n            .then(res => {\r\n                setUser(res.data);\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n    useEffect(() => {\r\n\r\n        document.title = \"Sản phẩm yêu thích | Tiki\"\r\n        getUser();\r\n        getData();\r\n    }, [getData])\r\n\r\n    const dislikeProduct = (productId) => {\r\n        if (token) {\r\n            deleteProductLiked(productId)\r\n                .then(() => getData())\r\n                .catch(() => alert(\"ERR\"))\r\n        } else {\r\n            props.history.push('/login');\r\n        }\r\n    }\r\n\r\n    useTimeout(() => setLoading(false), loading ? 1000 : null);\r\n    return (\r\n        <>\r\n            {\r\n                loading ? <Loading /> : (\r\n                    <div className=\"row sm-gutter section__content\">\r\n                        <div className=\"customer-wishlist\">\r\n                            <div className=\"row sm-gutter section__item\">\r\n                                <div className=\"col l-2-4 m-3 c-3\">\r\n                                    <AccountNavbar name={user?.fullName} />\r\n                                </div>\r\n                                <div className=\"col l-9-4 m-9 c-9\">\r\n                                    <h4 className=\"heading\">Danh sách yêu thích ({listProductLiked.length}) </h4>\r\n                                    <ul className=\"list\">\r\n                                        {\r\n                                            listProductLiked.map((item) => {\r\n                                                return (\r\n                                                    <li className=\"item\" key={item.id}>\r\n                                                        <button className=\"btn-delete\" onClick={() => dislikeProduct(item.productId)}>×</button>\r\n                                                        <div className=\"thumbnail\">\r\n                                                            <Link to={`/san-pham/${item.productId}/${item.slug}`}>\r\n                                                                <div className=\"thumbnail-img\">\r\n                                                                    <img className=\"image\" alt=\"\" src={item.mainImage} />\r\n                                                                </div>\r\n                                                            </Link>\r\n                                                        </div>\r\n                                                        <div className=\"body\">\r\n                                                            <Link className=\"name\" to={`/san-pham/${item.productId}/${item.slug}`}>{item.name}</Link>\r\n                                                            <Link className=\"name\" to={`/${item.category?.code}`}>{item.category?.name}</Link>\r\n                                                            <Link className=\"name\" to={`/${item.category?.code}/${item.subcategory?.code}`}>{item.subcategory?.name}</Link>\r\n                                                        </div>\r\n                                                        <div className=\"item-footer\">\r\n                                                            <div className=\"price\">{currency(item.price)}</div>\r\n                                                            <div className=\"wrap\">\r\n                                                                <div className=\"list-price\">{currency(item.list_price)}</div>\r\n                                                                <div className=\"discount\">{item.percent_discount}%</div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </li>\r\n                                                )\r\n                                            })\r\n                                        }\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        </>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}