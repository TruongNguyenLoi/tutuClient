{"ast":null,"code":"import _slicedToArray from \"D:\\\\TUTUSHOP\\\\ecomerce-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\TUTUSHOP\\\\ecomerce-client\\\\src\\\\pages\\\\ListProductPage.js\";\nimport React from 'react';\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport Filter from 'components/Filter/Filter';\nimport Title from 'components/Filter/Title';\nimport Product from 'components/Item/Product';\nimport Pagination from 'components/Pagination/Pagination';\nimport { getProductListByCategoryAndSubcategory, getProductList } from 'actions/services/ProductServices';\nimport useTimeout from 'hooks/useTimeout';\nimport ProductSkeleton from 'components/Item/ProductSkeleton';\nfunction ListProductPage(props) {\n  var match = props.match;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    products = _useState2[0],\n    setProducts = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    totalElements = _useState4[0],\n    setTotalElements = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var params = new URLSearchParams(window.location.search);\n  var page = params.get('page');\n  var sortBy = params.get('sort_by') ? params.get('sort_by') : '';\n  var sortValue = params.get('sort_value') ? params.get('sort_value') : '';\n  var keyword = params.get('keyword') ? params.get('keyword') : '';\n  var price = params.get('price') ? params.get('price') : '';\n  var brand = params.get('brand') ? params.get('brand') : '';\n  useEffect(function () {\n    document.title = \"Danh sách sản phẩm giá cực tốt\";\n    var searchObject = {};\n    searchObject.keyword = keyword ? keyword : '';\n    searchObject.page = page ? parseInt(page) : 1;\n    var category = match.params.category ? match.params.category : '';\n    var subcategory = match.params.subcategory ? match.params.subcategory : '';\n    searchObject.category = category;\n    searchObject.subcategory = subcategory;\n    searchObject.sortBy = sortBy ? sortBy : '';\n    searchObject.sortValue = sortValue ? sortValue : '';\n    searchObject.brand = brand ? brand : '';\n    searchObject.price = price ? price : '';\n    if (category !== '' && category) {\n      getProductListByCategoryAndSubcategory(searchObject).then(function (res) {\n        setProducts(res.data.content);\n        setTotalElements(res.data.totalElements);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    } else {\n      getProductList(searchObject).then(function (res) {\n        setProducts(res.data.content);\n        setTotalElements(res.data.totalElements);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, [page, match, brand, keyword, sortBy, sortValue, price]);\n  useTimeout(function () {\n    return setLoading(false);\n  }, loading ? 1000 : null);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row sm-gutter section__content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Filter, {\n    category: match.params.category,\n    history: props.history,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col l-9-4 m-12 c-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home-product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row sm-gutter section__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  },\n  /*#__PURE__*/\n  // products?.length > 0 ? (\n  React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Title, {\n    type: match.params.category,\n    totalProducts: totalElements,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 41\n    }\n  }), loading ? /*#__PURE__*/React.createElement(ProductSkeleton, {\n    total: totalElements,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 55\n    }\n  }) : /*#__PURE__*/React.createElement(Product, {\n    products: products,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 99\n    }\n  }))\n  // ) : <p>Không tìm thấy sản phẩm cần  tìm</p>\n  )), /*#__PURE__*/React.createElement(Pagination, {\n    totalRows: totalElements,\n    page: page ? page : 1,\n    limit: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }))));\n}\nexport default ListProductPage;","map":{"version":3,"names":["React","useEffect","useState","Filter","Title","Product","Pagination","getProductListByCategoryAndSubcategory","getProductList","useTimeout","ProductSkeleton","ListProductPage","props","match","_useState","_useState2","_slicedToArray","products","setProducts","_useState3","_useState4","totalElements","setTotalElements","_useState5","_useState6","loading","setLoading","params","URLSearchParams","window","location","search","page","get","sortBy","sortValue","keyword","price","brand","document","title","searchObject","parseInt","category","subcategory","then","res","data","content","catch","err","console","log","createElement","Fragment","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","history","type","totalProducts","total","totalRows","limit"],"sources":["D:/TUTUSHOP/ecomerce-client/src/pages/ListProductPage.js"],"sourcesContent":["import React from 'react'\r\nimport { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport Filter from 'components/Filter/Filter';\r\nimport Title from 'components/Filter/Title';\r\nimport Product from 'components/Item/Product';\r\nimport Pagination from 'components/Pagination/Pagination';\r\nimport { getProductListByCategoryAndSubcategory, getProductList } from 'actions/services/ProductServices'\r\nimport useTimeout from 'hooks/useTimeout';\r\nimport ProductSkeleton from 'components/Item/ProductSkeleton';\r\n\r\nfunction ListProductPage(props) {\r\n    const { match } = props;\r\n    const [products, setProducts] = useState([]);\r\n    const [totalElements, setTotalElements] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const params = new URLSearchParams(window.location.search)\r\n    const page = params.get('page');\r\n    const sortBy = params.get('sort_by') ? params.get('sort_by') : '';\r\n    const sortValue = params.get('sort_value') ? params.get('sort_value') : '';\r\n    const keyword = params.get('keyword') ? params.get('keyword') : '';\r\n    const price = params.get('price') ? params.get('price') : '';\r\n    const brand = params.get('brand') ? params.get('brand') : '';\r\n    useEffect(() => {\r\n        document.title = \"Danh sách sản phẩm giá cực tốt\"\r\n        let searchObject = {};\r\n        searchObject.keyword = keyword ? keyword : '';\r\n        searchObject.page = page ? parseInt(page) : 1;\r\n        const category = match.params.category ? match.params.category : '';\r\n        const subcategory = match.params.subcategory ? match.params.subcategory : '';\r\n        searchObject.category = category;\r\n        searchObject.subcategory = subcategory;\r\n        searchObject.sortBy = sortBy ? sortBy : '';\r\n        searchObject.sortValue = sortValue ? sortValue : '';\r\n        searchObject.brand = brand ? brand : '';\r\n        searchObject.price = price ? price : '';\r\n        if (category !== '' && category) {\r\n            getProductListByCategoryAndSubcategory(searchObject)\r\n                .then((res) => {\r\n                    setProducts(res.data.content);\r\n                    setTotalElements(res.data.totalElements)\r\n                })\r\n                .catch(err => console.log(err))\r\n        } else {\r\n            getProductList(searchObject)\r\n                .then((res) => {\r\n                    setProducts(res.data.content);\r\n                    setTotalElements(res.data.totalElements)\r\n                })\r\n                .catch(err => console.log(err))\r\n        }\r\n    }, [page, match, brand, keyword, sortBy, sortValue, price])\r\n\r\n\r\n    useTimeout(() => setLoading(false), loading ? 1000 : null);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"row sm-gutter section__content\">\r\n                <Filter category={match.params.category} history={props.history} />\r\n                <div className=\"col l-9-4 m-12 c-12\">\r\n                    <div className=\"home-product\">\r\n                        <div className=\"row sm-gutter section__item\">\r\n                            {\r\n                                // products?.length > 0 ? (\r\n                                    <>\r\n                                        <Title type={match.params.category} totalProducts={totalElements} />\r\n                                        {\r\n                                            loading ? <ProductSkeleton total={totalElements} /> : <Product products={products} />\r\n                                        }\r\n                                    </>\r\n                                // ) : <p>Không tìm thấy sản phẩm cần  tìm</p>\r\n                            }\r\n                        </div>\r\n\r\n                    </div>\r\n                    <Pagination totalRows={totalElements} page={page ? page : 1} limit={20} />\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ListProductPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}