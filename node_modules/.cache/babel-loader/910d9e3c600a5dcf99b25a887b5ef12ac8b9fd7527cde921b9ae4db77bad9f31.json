{"ast":null,"code":"import _classCallCheck from\"D:/TutuFinal/tutuClient/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/TutuFinal/tutuClient/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/TutuFinal/tutuClient/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/TutuFinal/tutuClient/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Redirect}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";var OAuth2RedirectHandler=/*#__PURE__*/function(_Component){_inherits(OAuth2RedirectHandler,_Component);var _super=_createSuper(OAuth2RedirectHandler);function OAuth2RedirectHandler(){_classCallCheck(this,OAuth2RedirectHandler);return _super.apply(this,arguments);}_createClass(OAuth2RedirectHandler,[{key:\"getUrlParameter\",value:function getUrlParameter(name){name=name.replace(/[[]/,'\\\\[').replace(/[\\]]/,'\\\\]');var regex=new RegExp('[\\\\?&]'+name+'=([^&#]*)');var results=regex.exec(this.props.location.search);return results===null?'':decodeURIComponent(results[1].replace(/\\+/g,' '));}},{key:\"render\",value:function render(){var token=this.getUrlParameter('token');var username=this.getUrlParameter('username');if(token){localStorage.setItem('token',token);localStorage.setItem('username',username);return/*#__PURE__*/_jsx(Redirect,{to:{pathname:\"/\",state:{from:this.props.location}}});}else{return/*#__PURE__*/_jsx(Redirect,{to:{pathname:\"/login\"}});}}}]);return OAuth2RedirectHandler;}(Component);export default OAuth2RedirectHandler;","map":{"version":3,"names":["React","Component","Redirect","jsx","_jsx","OAuth2RedirectHandler","_Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","getUrlParameter","name","replace","regex","RegExp","results","exec","props","location","search","decodeURIComponent","render","token","username","localStorage","setItem","to","pathname","state","from"],"sources":["D:/TutuFinal/tutuClient/src/components/Oauth2Handler/OAuth2RedirectHandler.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nclass OAuth2RedirectHandler extends Component {\r\n    getUrlParameter(name) {\r\n        name = name.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\r\n        var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\r\n\r\n        var results = regex.exec(this.props.location.search);\r\n        return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\r\n    };\r\n\r\n    render() {\r\n        const token = this.getUrlParameter('token');\r\n        const username = this.getUrlParameter('username');\r\n\r\n\r\n\r\n        if (token) {\r\n            localStorage.setItem('token', token);\r\n            localStorage.setItem('username', username);\r\n            return <Redirect to={{\r\n                pathname: \"/\",\r\n                state: { from: this.props.location }\r\n            }} />;\r\n        } else {\r\n            return <Redirect to={{\r\n                pathname: \"/login\",\r\n            }} />;\r\n        }\r\n    }\r\n}\r\n\r\nexport default OAuth2RedirectHandler;"],"mappings":"oaAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,QAAQ,KAAQ,kBAAkB,QAAAC,GAAA,IAAAC,IAAA,4BAErC,CAAAC,qBAAqB,uBAAAC,UAAA,EAAAC,SAAA,CAAAF,qBAAA,CAAAC,UAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,qBAAA,WAAAA,sBAAA,EAAAK,eAAA,MAAAL,qBAAA,SAAAG,MAAA,CAAAG,KAAA,MAAAC,SAAA,GAAAC,YAAA,CAAAR,qBAAA,GAAAS,GAAA,mBAAAC,KAAA,CACvB,SAAAC,gBAAgBC,IAAI,CAAE,CAClBA,IAAI,CAAGA,IAAI,CAACC,OAAO,CAAC,KAAK,CAAE,KAAK,CAAC,CAACA,OAAO,CAAC,MAAM,CAAE,KAAK,CAAC,CACxD,GAAI,CAAAC,KAAK,CAAG,GAAI,CAAAC,MAAM,CAAC,QAAQ,CAAGH,IAAI,CAAG,WAAW,CAAC,CAErD,GAAI,CAAAI,OAAO,CAAGF,KAAK,CAACG,IAAI,CAAC,IAAI,CAACC,KAAK,CAACC,QAAQ,CAACC,MAAM,CAAC,CACpD,MAAO,CAAAJ,OAAO,GAAK,IAAI,CAAG,EAAE,CAAGK,kBAAkB,CAACL,OAAO,CAAC,CAAC,CAAC,CAACH,OAAO,CAAC,KAAK,CAAE,GAAG,CAAC,CAAC,CACrF,CAAC,GAAAJ,GAAA,UAAAC,KAAA,CAED,SAAAY,OAAA,CAAS,CACL,GAAM,CAAAC,KAAK,CAAG,IAAI,CAACZ,eAAe,CAAC,OAAO,CAAC,CAC3C,GAAM,CAAAa,QAAQ,CAAG,IAAI,CAACb,eAAe,CAAC,UAAU,CAAC,CAIjD,GAAIY,KAAK,CAAE,CACPE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEH,KAAK,CAAC,CACpCE,YAAY,CAACC,OAAO,CAAC,UAAU,CAAEF,QAAQ,CAAC,CAC1C,mBAAOzB,IAAA,CAACF,QAAQ,EAAC8B,EAAE,CAAE,CACjBC,QAAQ,CAAE,GAAG,CACbC,KAAK,CAAE,CAAEC,IAAI,CAAE,IAAI,CAACZ,KAAK,CAACC,QAAS,CACvC,CAAE,CAAE,CAAC,CACT,CAAC,IAAM,CACH,mBAAOpB,IAAA,CAACF,QAAQ,EAAC8B,EAAE,CAAE,CACjBC,QAAQ,CAAE,QACd,CAAE,CAAE,CAAC,CACT,CACJ,CAAC,WAAA5B,qBAAA,GA3B+BJ,SAAS,EA8B7C,cAAe,CAAAI,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}